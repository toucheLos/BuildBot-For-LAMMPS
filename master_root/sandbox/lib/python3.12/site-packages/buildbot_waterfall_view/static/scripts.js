(function(v,yt){typeof exports=="object"&&typeof module<"u"?yt(require("react"),require("mobx"),require("mobx-react"),require("buildbot-plugin-support"),require("buildbot-data-js"),require("buildbot-ui")):typeof define=="function"&&define.amd?define(["react","mobx","mobx-react","buildbot-plugin-support","buildbot-data-js","buildbot-ui"],yt):(v=typeof globalThis<"u"?globalThis:v||self,yt(v.React,v.mobx,v.mobxReact,v.BuildbotPluginSupport,v.BuildbotDataJs,v.BuildbotUi))})(this,function(v,yt,Pr,Ze,R,it){"use strict";var Je={exports:{}},Rt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wr=v,Ir=Symbol.for("react.element"),Rr=Symbol.for("react.fragment"),Yr=Object.prototype.hasOwnProperty,Vr=Wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zr={key:!0,ref:!0,__self:!0,__source:!0};function tn(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Yr.call(e,r)&&!zr.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Ir,type:t,key:o,ref:a,props:i,_owner:Vr.current}}Rt.Fragment=Rr,Rt.jsx=tn,Rt.jsxs=tn,Je.exports=Rt;var P=Je.exports;function pe(){return pe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pe.apply(null,arguments)}var en=["shift","alt","meta","mod","ctrl"],qr={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function ot(t){return(t&&qr[t]||t||"").trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function Xr(t){return en.includes(t)}function ye(t,e){return e===void 0&&(e=","),t.split(e)}function ve(t,e,n){e===void 0&&(e="+");var r=t.toLocaleLowerCase().split(e).map(function(a){return ot(a)}),i={alt:r.includes("alt"),ctrl:r.includes("ctrl")||r.includes("control"),shift:r.includes("shift"),meta:r.includes("meta"),mod:r.includes("mod")},o=r.filter(function(a){return!en.includes(a)});return pe({},i,{keys:o,description:n,hotkey:t})}(function(){typeof document<"u"&&(document.addEventListener("keydown",function(t){t.key!==void 0&&nn([ot(t.key),ot(t.code)])}),document.addEventListener("keyup",function(t){t.key!==void 0&&rn([ot(t.key),ot(t.code)])})),typeof window<"u"&&window.addEventListener("blur",function(){at.clear()})})();var at=new Set;function we(t){return Array.isArray(t)}function Gr(t,e){e===void 0&&(e=",");var n=we(t)?t:t.split(e);return n.every(function(r){return at.has(r.trim().toLowerCase())})}function nn(t){var e=Array.isArray(t)?t:[t];at.has("meta")&&at.forEach(function(n){return!Xr(n)&&at.delete(n.toLowerCase())}),e.forEach(function(n){return at.add(n.toLowerCase())})}function rn(t){var e=Array.isArray(t)?t:[t];t==="meta"?at.clear():e.forEach(function(n){return at.delete(n.toLowerCase())})}function Kr(t,e,n){(typeof n=="function"&&n(t,e)||n===!0)&&t.preventDefault()}function jr(t,e,n){return typeof n=="function"?n(t,e):n===!0||n===void 0}function Qr(t){return on(t,["input","textarea","select"])}function on(t,e){e===void 0&&(e=!1);var n=t.target,r=t.composed,i=null;return Zr(n)&&r?i=t.composedPath()[0]&&t.composedPath()[0].tagName:i=n&&n.tagName,we(e)?!!(i&&e&&e.some(function(o){var a;return o.toLowerCase()===((a=i)==null?void 0:a.toLowerCase())})):!!(i&&e&&e)}function Zr(t){return!!t.tagName&&!t.tagName.startsWith("-")&&t.tagName.includes("-")}function Jr(t,e){return t.length===0&&e?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):e?t.some(function(n){return e.includes(n)})||t.includes("*"):!0}var ti=function(e,n,r){r===void 0&&(r=!1);var i=n.alt,o=n.meta,a=n.mod,u=n.shift,l=n.ctrl,s=n.keys,c=e.key,d=e.code,h=e.ctrlKey,f=e.metaKey,p=e.shiftKey,_=e.altKey,x=ot(d),C=c.toLowerCase();if(!(s!=null&&s.includes(x))&&!(s!=null&&s.includes(C))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(x))return!1;if(!r){if(i===!_&&C!=="alt"||u===!p&&C!=="shift")return!1;if(a){if(!f&&!h)return!1}else if(o===!f&&C!=="meta"&&C!=="os"||l===!h&&C!=="ctrl"&&C!=="control")return!1}return s&&s.length===1&&(s.includes(C)||s.includes(x))?!0:s?Gr(s):!s},ei=v.createContext(void 0),ni=function(){return v.useContext(ei)};function an(t,e){return t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(t).length===Object.keys(e).length&&Object.keys(t).reduce(function(n,r){return n&&an(t[r],e[r])},!0):t===e}var ri=v.createContext({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),ii=function(){return v.useContext(ri)};function oi(t){var e=v.useRef(void 0);return an(e.current,t)||(e.current=t),e.current}var un=function(e){e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},ai=typeof window<"u"?v.useLayoutEffect:v.useEffect;function sn(t,e,n,r){var i=v.useState(null),o=i[0],a=i[1],u=v.useRef(!1),l=n instanceof Array?r instanceof Array?void 0:r:n,s=we(t)?t.join(l?.splitKey):t,c=n instanceof Array?n:r instanceof Array?r:void 0,d=v.useCallback(e,c??[]),h=v.useRef(d);c?h.current=d:h.current=e;var f=oi(l),p=ii(),_=p.enabledScopes,x=ni();return ai(function(){if(!(f?.enabled===!1||!Jr(_,f?.scopes))){var C=function(w,F){var U;if(F===void 0&&(F=!1),!(Qr(w)&&!on(w,f?.enableOnFormTags))){if(o!==null){var B=o.getRootNode();if((B instanceof Document||B instanceof ShadowRoot)&&B.activeElement!==o&&!o.contains(B.activeElement)){un(w);return}}(U=w.target)!=null&&U.isContentEditable&&!(f!=null&&f.enableOnContentEditable)||ye(s,f?.splitKey).forEach(function(H){var y,N=ve(H,f?.combinationKey);if(ti(w,N,f?.ignoreModifiers)||(y=N.keys)!=null&&y.includes("*")){if(f!=null&&f.ignoreEventWhen!=null&&f.ignoreEventWhen(w)||F&&u.current)return;if(Kr(w,N,f?.preventDefault),!jr(w,N,f?.enabled)){un(w);return}h.current(w,N),F||(u.current=!0)}})}},$=function(w){w.key!==void 0&&(nn(ot(w.code)),(f?.keydown===void 0&&f?.keyup!==!0||f!=null&&f.keydown)&&C(w))},k=function(w){w.key!==void 0&&(rn(ot(w.code)),u.current=!1,f!=null&&f.keyup&&C(w,!0))},A=o||l?.document||document;return A.addEventListener("keyup",k),A.addEventListener("keydown",$),x&&ye(s,f?.splitKey).forEach(function(M){return x.addHotkey(ve(M,f?.combinationKey,f?.description))}),function(){A.removeEventListener("keyup",k),A.removeEventListener("keydown",$),x&&ye(s,f?.splitKey).forEach(function(M){return x.removeHotkey(ve(M,f?.combinationKey,f?.description))})}}},[o,s,f,_]),a}var ln={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},cn=v.createContext&&v.createContext(ln),ui=["attr","size","title"];function si(t,e){if(t==null)return{};var n=li(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function li(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Yt(){return Yt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yt.apply(this,arguments)}function fn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fn(Object(n),!0).forEach(function(r){ci(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ci(t,e,n){return e=fi(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fi(t){var e=hi(t,"string");return typeof e=="symbol"?e:e+""}function hi(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hn(t){return t&&t.map((e,n)=>v.createElement(e.tag,Vt({key:n},e.attr),hn(e.child)))}function xe(t){return e=>v.createElement(di,Yt({attr:Vt({},t.attr)},e),hn(t.child))}function di(t){var e=n=>{var{attr:r,size:i,title:o}=t,a=si(t,ui),u=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),v.createElement("svg",Yt({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:l,style:Vt(Vt({color:t.color||n.color},n.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&v.createElement("title",null,o),t.children)};return cn!==void 0?v.createElement(cn.Consumer,null,n=>e(n)):e(ln)}function gi(t){return xe({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function mi(t){return xe({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 192v32c0 6.6-5.4 12-12 12H124c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z"},child:[]}]})(t)}function pi(t){return xe({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 192v32c0 6.6-5.4 12-12 12h-56v56c0 6.6-5.4 12-12 12h-32c-6.6 0-12-5.4-12-12v-56h-56c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h56v-56c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v56h56c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z"},child:[]}]})(t)}function yi(t){const e=new Map;for(const n of t)it.pushIntoMapOfArrays(e,n.builderid,n);return e}function vi(t,e,n,r){const i=[...e];i.sort((u,l)=>u.buildid-l.buildid);let o=0;const a=[];for(const u of i){if(!t.has(u.builderid))continue;u.started_at-o>n&&(a.length>0&&(a[a.length-1].maxTime=o),a.push({minTime:u.started_at,maxTime:u.started_at}));const l=u.complete?u.complete_at:Math.max(u.started_at,r);l>o&&(o=l)}return a.length>0&&(a[a.length-1].maxTime=o),a}class wi{constructor(e,n,r){this.height=0,this.heightNoGap=0,this.gap=0,this.totalGroupTimeSum=0,this.buildGroups=e,this.height=r,this.heightNoGap=r-(e.length-1)*n,this.gap=n,this.totalGroupTimeSum=0;for(const i of e)this.totalGroupTimeSum+=i.maxTime-i.minTime}getCoord(e){let n=0;for(let r=0;r<this.buildGroups.length;r++){const i=this.buildGroups[r];if(i.minTime<=e&&e<=i.maxTime)return n+=e-i.minTime,this.height-this.heightNoGap/this.totalGroupTimeSum*n-r*this.gap;n+=i.maxTime-i.minTime}}invert(e){let n=0;for(let r=0;r<this.buildGroups.length;r++){const i=this.buildGroups[r],o=(this.height-e-r*this.gap)*(this.totalGroupTimeSum/this.heightNoGap)-n+i.minTime;if(i.minTime<=o&&o<=i.maxTime)return o;n+=i.maxTime-i.minTime}}}function zt(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xi(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function dn(t){let e,n,r;t.length!==2?(e=zt,n=(u,l)=>zt(t(u),l),r=(u,l)=>t(u)-l):(e=t===zt||t===xi?t:_i,n=t,r=t);function i(u,l,s=0,c=u.length){if(s<c){if(e(l,l)!==0)return c;do{const d=s+c>>>1;n(u[d],l)<0?s=d+1:c=d}while(s<c)}return s}function o(u,l,s=0,c=u.length){if(s<c){if(e(l,l)!==0)return c;do{const d=s+c>>>1;n(u[d],l)<=0?s=d+1:c=d}while(s<c)}return s}function a(u,l,s=0,c=u.length){const d=i(u,l,s,c-1);return d>s&&r(u[d-1],l)>-r(u[d],l)?d-1:d}return{left:i,center:a,right:o}}function _i(){return 0}function bi(t){return t===null?NaN:+t}const Mi=dn(zt).right;dn(bi).center;class gn extends Map{constructor(e,n=ki){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(mn(this,e))}has(e){return super.has(mn(this,e))}set(e,n){return super.set(Si(this,e),n)}delete(e){return super.delete(Ti(this,e))}}function mn({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Si({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Ti({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function ki(t){return t!==null&&typeof t=="object"?t.valueOf():t}const Ci=Math.sqrt(50),Ai=Math.sqrt(10),Ni=Math.sqrt(2);function qt(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Ci?10:o>=Ai?5:o>=Ni?2:1;let u,l,s;return i<0?(s=Math.pow(10,-i)/a,u=Math.round(t*s),l=Math.round(e*s),u/s<t&&++u,l/s>e&&--l,s=-s):(s=Math.pow(10,i)*a,u=Math.round(t/s),l=Math.round(e/s),u*s<t&&++u,l*s>e&&--l),l<u&&.5<=n&&n<2?qt(t,e,n*2):[u,l,s]}function Ei(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?qt(e,t,n):qt(t,e,n);if(!(o>=i))return[];const u=o-i+1,l=new Array(u);if(r)if(a<0)for(let s=0;s<u;++s)l[s]=(o-s)/-a;else for(let s=0;s<u;++s)l[s]=(o-s)*a;else if(a<0)for(let s=0;s<u;++s)l[s]=(i+s)/-a;else for(let s=0;s<u;++s)l[s]=(i+s)*a;return l}function _e(t,e,n){return e=+e,t=+t,n=+n,qt(t,e,n)[2]}function $i(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?_e(e,t,n):_e(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Fi(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Di(t){return t}var Xt=1,be=2,pn=3,Ct=4,yn=1e-6;function Oi(t){return"translate("+t+",0)"}function Hi(t){return"translate(0,"+t+")"}function Ui(t){return e=>+t(e)}function Bi(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Li(){return!this.__axis}function vn(t,e){var n=[],r=null,i=null,o=6,a=6,u=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,s=t===Xt||t===Ct?-1:1,c=t===Ct||t===be?"x":"y",d=t===Xt||t===pn?Oi:Hi;function h(f){var p=r??(e.ticks?e.ticks.apply(e,n):e.domain()),_=i??(e.tickFormat?e.tickFormat.apply(e,n):Di),x=Math.max(o,0)+u,C=e.range(),$=+C[0]+l,k=+C[C.length-1]+l,A=(e.bandwidth?Bi:Ui)(e.copy(),l),M=f.selection?f.selection():f,w=M.selectAll(".domain").data([null]),F=M.selectAll(".tick").data(p,e).order(),U=F.exit(),B=F.enter().append("g").attr("class","tick"),H=F.select("line"),y=F.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),F=F.merge(B),H=H.merge(B.append("line").attr("stroke","currentColor").attr(c+"2",s*o)),y=y.merge(B.append("text").attr("fill","currentColor").attr(c,s*x).attr("dy",t===Xt?"0em":t===pn?"0.71em":"0.32em")),f!==M&&(w=w.transition(f),F=F.transition(f),H=H.transition(f),y=y.transition(f),U=U.transition(f).attr("opacity",yn).attr("transform",function(N){return isFinite(N=A(N))?d(N+l):this.getAttribute("transform")}),B.attr("opacity",yn).attr("transform",function(N){var D=this.parentNode.__axis;return d((D&&isFinite(D=D(N))?D:A(N))+l)})),U.remove(),w.attr("d",t===Ct||t===be?a?"M"+s*a+","+$+"H"+l+"V"+k+"H"+s*a:"M"+l+","+$+"V"+k:a?"M"+$+","+s*a+"V"+l+"H"+k+"V"+s*a:"M"+$+","+l+"H"+k),F.attr("opacity",1).attr("transform",function(N){return d(A(N)+l)}),H.attr(c+"2",s*o),y.attr(c,s*x).text(_),M.filter(Li).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===be?"start":t===Ct?"end":"middle"),M.each(function(){this.__axis=A})}return h.scale=function(f){return arguments.length?(e=f,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(f){return arguments.length?(n=f==null?[]:Array.from(f),h):n.slice()},h.tickValues=function(f){return arguments.length?(r=f==null?null:Array.from(f),h):r&&r.slice()},h.tickFormat=function(f){return arguments.length?(i=f,h):i},h.tickSize=function(f){return arguments.length?(o=a=+f,h):o},h.tickSizeInner=function(f){return arguments.length?(o=+f,h):o},h.tickSizeOuter=function(f){return arguments.length?(a=+f,h):a},h.tickPadding=function(f){return arguments.length?(u=+f,h):u},h.offset=function(f){return arguments.length?(l=+f,h):l},h}function Pi(t){return vn(Xt,t)}function Wi(t){return vn(Ct,t)}var Ii={value:()=>{}};function wn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Gt(n)}function Gt(t){this._=t}function Ri(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Gt.prototype=wn.prototype={constructor:Gt,on:function(t,e){var n=this._,r=Ri(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=Yi(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=xn(n[i],t.name,e);else if(e==null)for(i in n)n[i]=xn(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Gt(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Yi(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function xn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ii,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Me="http://www.w3.org/1999/xhtml";const _n={svg:"http://www.w3.org/2000/svg",xhtml:Me,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Kt(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),_n.hasOwnProperty(e)?{space:_n[e],local:t}:t}function Vi(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Me&&e.documentElement.namespaceURI===Me?e.createElement(t):e.createElementNS(n,t)}}function zi(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function bn(t){var e=Kt(t);return(e.local?zi:Vi)(e)}function qi(){}function Se(t){return t==null?qi:function(){return this.querySelector(t)}}function Xi(t){typeof t!="function"&&(t=Se(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,u=r[i]=new Array(a),l,s,c=0;c<a;++c)(l=o[c])&&(s=t.call(l,l.__data__,c,o))&&("__data__"in l&&(s.__data__=l.__data__),u[c]=s);return new Y(r,this._parents)}function Gi(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ki(){return[]}function Mn(t){return t==null?Ki:function(){return this.querySelectorAll(t)}}function ji(t){return function(){return Gi(t.apply(this,arguments))}}function Qi(t){typeof t=="function"?t=ji(t):t=Mn(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],u=a.length,l,s=0;s<u;++s)(l=a[s])&&(r.push(t.call(l,l.__data__,s,a)),i.push(l));return new Y(r,i)}function Sn(t){return function(){return this.matches(t)}}function Tn(t){return function(e){return e.matches(t)}}var Zi=Array.prototype.find;function Ji(t){return function(){return Zi.call(this.children,t)}}function to(){return this.firstElementChild}function eo(t){return this.select(t==null?to:Ji(typeof t=="function"?t:Tn(t)))}var no=Array.prototype.filter;function ro(){return Array.from(this.children)}function io(t){return function(){return no.call(this.children,t)}}function oo(t){return this.selectAll(t==null?ro:io(typeof t=="function"?t:Tn(t)))}function ao(t){typeof t!="function"&&(t=Sn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,u=r[i]=[],l,s=0;s<a;++s)(l=o[s])&&t.call(l,l.__data__,s,o)&&u.push(l);return new Y(r,this._parents)}function kn(t){return new Array(t.length)}function uo(){return new Y(this._enter||this._groups.map(kn),this._parents)}function jt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}jt.prototype={constructor:jt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function so(t){return function(){return t}}function lo(t,e,n,r,i,o){for(var a=0,u,l=e.length,s=o.length;a<s;++a)(u=e[a])?(u.__data__=o[a],r[a]=u):n[a]=new jt(t,o[a]);for(;a<l;++a)(u=e[a])&&(i[a]=u)}function co(t,e,n,r,i,o,a){var u,l,s=new Map,c=e.length,d=o.length,h=new Array(c),f;for(u=0;u<c;++u)(l=e[u])&&(h[u]=f=a.call(l,l.__data__,u,e)+"",s.has(f)?i[u]=l:s.set(f,l));for(u=0;u<d;++u)f=a.call(t,o[u],u,o)+"",(l=s.get(f))?(r[u]=l,l.__data__=o[u],s.delete(f)):n[u]=new jt(t,o[u]);for(u=0;u<c;++u)(l=e[u])&&s.get(h[u])===l&&(i[u]=l)}function fo(t){return t.__data__}function ho(t,e){if(!arguments.length)return Array.from(this,fo);var n=e?co:lo,r=this._parents,i=this._groups;typeof t!="function"&&(t=so(t));for(var o=i.length,a=new Array(o),u=new Array(o),l=new Array(o),s=0;s<o;++s){var c=r[s],d=i[s],h=d.length,f=go(t.call(c,c&&c.__data__,s,r)),p=f.length,_=u[s]=new Array(p),x=a[s]=new Array(p),C=l[s]=new Array(h);n(c,d,_,x,C,f,e);for(var $=0,k=0,A,M;$<p;++$)if(A=_[$]){for($>=k&&(k=$+1);!(M=x[k])&&++k<p;);A._next=M||null}}return a=new Y(a,r),a._enter=u,a._exit=l,a}function go(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function mo(){return new Y(this._exit||this._groups.map(kn),this._parents)}function po(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function yo(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),u=new Array(i),l=0;l<a;++l)for(var s=n[l],c=r[l],d=s.length,h=u[l]=new Array(d),f,p=0;p<d;++p)(f=s[p]||c[p])&&(h[p]=f);for(;l<i;++l)u[l]=n[l];return new Y(u,this._parents)}function vo(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function wo(t){t||(t=xo);function e(d,h){return d&&h?t(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],u=a.length,l=i[o]=new Array(u),s,c=0;c<u;++c)(s=a[c])&&(l[c]=s);l.sort(e)}return new Y(i,this._parents).order()}function xo(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function _o(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function bo(){return Array.from(this)}function Mo(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function So(){let t=0;for(const e of this)++t;return t}function To(){return!this.node()}function ko(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,u;o<a;++o)(u=i[o])&&t.call(u,u.__data__,o,i);return this}function Co(t){return function(){this.removeAttribute(t)}}function Ao(t){return function(){this.removeAttributeNS(t.space,t.local)}}function No(t,e){return function(){this.setAttribute(t,e)}}function Eo(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function $o(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Fo(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Do(t,e){var n=Kt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Ao:Co:typeof e=="function"?n.local?Fo:$o:n.local?Eo:No)(n,e))}function Cn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Oo(t){return function(){this.style.removeProperty(t)}}function Ho(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Uo(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Bo(t,e,n){return arguments.length>1?this.each((e==null?Oo:typeof e=="function"?Uo:Ho)(t,e,n??"")):vt(this.node(),t)}function vt(t,e){return t.style.getPropertyValue(e)||Cn(t).getComputedStyle(t,null).getPropertyValue(e)}function Lo(t){return function(){delete this[t]}}function Po(t,e){return function(){this[t]=e}}function Wo(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Io(t,e){return arguments.length>1?this.each((e==null?Lo:typeof e=="function"?Wo:Po)(t,e)):this.node()[t]}function An(t){return t.trim().split(/^|\s+/)}function Te(t){return t.classList||new Nn(t)}function Nn(t){this._node=t,this._names=An(t.getAttribute("class")||"")}Nn.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function En(t,e){for(var n=Te(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function $n(t,e){for(var n=Te(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Ro(t){return function(){En(this,t)}}function Yo(t){return function(){$n(this,t)}}function Vo(t,e){return function(){(e.apply(this,arguments)?En:$n)(this,t)}}function zo(t,e){var n=An(t+"");if(arguments.length<2){for(var r=Te(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Vo:e?Ro:Yo)(n,e))}function qo(){this.textContent=""}function Xo(t){return function(){this.textContent=t}}function Go(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ko(t){return arguments.length?this.each(t==null?qo:(typeof t=="function"?Go:Xo)(t)):this.node().textContent}function jo(){this.innerHTML=""}function Qo(t){return function(){this.innerHTML=t}}function Zo(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Jo(t){return arguments.length?this.each(t==null?jo:(typeof t=="function"?Zo:Qo)(t)):this.node().innerHTML}function ta(){this.nextSibling&&this.parentNode.appendChild(this)}function ea(){return this.each(ta)}function na(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ra(){return this.each(na)}function ia(t){var e=typeof t=="function"?t:bn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function oa(){return null}function aa(t,e){var n=typeof t=="function"?t:bn(t),r=e==null?oa:typeof e=="function"?e:Se(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ua(){var t=this.parentNode;t&&t.removeChild(this)}function sa(){return this.each(ua)}function la(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ca(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function fa(t){return this.select(t?ca:la)}function ha(t){return arguments.length?this.property("__data__",t):this.node().__data__}function da(t){return function(e){t.call(this,e,this.__data__)}}function ga(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function ma(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function pa(t,e,n){return function(){var r=this.__on,i,o=da(e);if(r){for(var a=0,u=r.length;a<u;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function ya(t,e,n){var r=ga(t+""),i,o=r.length,a;if(arguments.length<2){var u=this.node().__on;if(u){for(var l=0,s=u.length,c;l<s;++l)for(i=0,c=u[l];i<o;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(u=e?pa:ma,i=0;i<o;++i)this.each(u(r[i],e,n));return this}function Fn(t,e,n){var r=Cn(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function va(t,e){return function(){return Fn(this,t,e)}}function wa(t,e){return function(){return Fn(this,t,e.apply(this,arguments))}}function xa(t,e){return this.each((typeof e=="function"?wa:va)(t,e))}function*_a(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Dn=[null];function Y(t,e){this._groups=t,this._parents=e}function At(){return new Y([[document.documentElement]],Dn)}function ba(){return this}Y.prototype=At.prototype={constructor:Y,select:Xi,selectAll:Qi,selectChild:eo,selectChildren:oo,filter:ao,data:ho,enter:uo,exit:mo,join:po,merge:yo,selection:ba,order:vo,sort:wo,call:_o,nodes:bo,node:Mo,size:So,empty:To,each:ko,attr:Do,style:Bo,property:Io,classed:zo,text:Ko,html:Jo,raise:ea,lower:ra,append:ia,insert:aa,remove:sa,clone:fa,datum:ha,on:ya,dispatch:xa,[Symbol.iterator]:_a};function et(t){return typeof t=="string"?new Y([[document.querySelector(t)]],[document.documentElement]):new Y([[t]],Dn)}function Ma(t){let e;for(;e=t.sourceEvent;)t=e;return t}function On(t,e){if(t=Ma(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function ke(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Hn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Nt(){}var Et=.7,Qt=1/Et,wt="\\s*([+-]?\\d+)\\s*",$t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Z="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sa=/^#([0-9a-f]{3,8})$/,Ta=new RegExp(`^rgb\\(${wt},${wt},${wt}\\)$`),ka=new RegExp(`^rgb\\(${Z},${Z},${Z}\\)$`),Ca=new RegExp(`^rgba\\(${wt},${wt},${wt},${$t}\\)$`),Aa=new RegExp(`^rgba\\(${Z},${Z},${Z},${$t}\\)$`),Na=new RegExp(`^hsl\\(${$t},${Z},${Z}\\)$`),Ea=new RegExp(`^hsla\\(${$t},${Z},${Z},${$t}\\)$`),Un={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ke(Nt,st,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Bn,formatHex:Bn,formatHex8:$a,formatHsl:Fa,formatRgb:Ln,toString:Ln});function Bn(){return this.rgb().formatHex()}function $a(){return this.rgb().formatHex8()}function Fa(){return Yn(this).formatHsl()}function Ln(){return this.rgb().formatRgb()}function st(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Sa.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Pn(e):n===3?new W(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Zt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Zt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ta.exec(t))?new W(e[1],e[2],e[3],1):(e=ka.exec(t))?new W(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ca.exec(t))?Zt(e[1],e[2],e[3],e[4]):(e=Aa.exec(t))?Zt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Na.exec(t))?Rn(e[1],e[2]/100,e[3]/100,1):(e=Ea.exec(t))?Rn(e[1],e[2]/100,e[3]/100,e[4]):Un.hasOwnProperty(t)?Pn(Un[t]):t==="transparent"?new W(NaN,NaN,NaN,0):null}function Pn(t){return new W(t>>16&255,t>>8&255,t&255,1)}function Zt(t,e,n,r){return r<=0&&(t=e=n=NaN),new W(t,e,n,r)}function Da(t){return t instanceof Nt||(t=st(t)),t?(t=t.rgb(),new W(t.r,t.g,t.b,t.opacity)):new W}function Ce(t,e,n,r){return arguments.length===1?Da(t):new W(t,e,n,r??1)}function W(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ke(W,Ce,Hn(Nt,{brighter(t){return t=t==null?Qt:Math.pow(Qt,t),new W(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Et:Math.pow(Et,t),new W(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new W(lt(this.r),lt(this.g),lt(this.b),Jt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wn,formatHex:Wn,formatHex8:Oa,formatRgb:In,toString:In}));function Wn(){return`#${ct(this.r)}${ct(this.g)}${ct(this.b)}`}function Oa(){return`#${ct(this.r)}${ct(this.g)}${ct(this.b)}${ct((isNaN(this.opacity)?1:this.opacity)*255)}`}function In(){const t=Jt(this.opacity);return`${t===1?"rgb(":"rgba("}${lt(this.r)}, ${lt(this.g)}, ${lt(this.b)}${t===1?")":`, ${t})`}`}function Jt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function lt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ct(t){return t=lt(t),(t<16?"0":"")+t.toString(16)}function Rn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new G(t,e,n,r)}function Yn(t){if(t instanceof G)return new G(t.h,t.s,t.l,t.opacity);if(t instanceof Nt||(t=st(t)),!t)return new G;if(t instanceof G)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,u=o-i,l=(o+i)/2;return u?(e===o?a=(n-r)/u+(n<r)*6:n===o?a=(r-e)/u+2:a=(e-n)/u+4,u/=l<.5?o+i:2-o-i,a*=60):u=l>0&&l<1?0:a,new G(a,u,l,t.opacity)}function Ha(t,e,n,r){return arguments.length===1?Yn(t):new G(t,e,n,r??1)}function G(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ke(G,Ha,Hn(Nt,{brighter(t){return t=t==null?Qt:Math.pow(Qt,t),new G(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Et:Math.pow(Et,t),new G(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new W(Ae(t>=240?t-240:t+120,i,r),Ae(t,i,r),Ae(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new G(Vn(this.h),te(this.s),te(this.l),Jt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Jt(this.opacity);return`${t===1?"hsl(":"hsla("}${Vn(this.h)}, ${te(this.s)*100}%, ${te(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Vn(t){return t=(t||0)%360,t<0?t+360:t}function te(t){return Math.max(0,Math.min(1,t||0))}function Ae(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ne=t=>()=>t;function Ua(t,e){return function(n){return t+n*e}}function Ba(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function La(t){return(t=+t)==1?zn:function(e,n){return n-e?Ba(e,n,t):Ne(isNaN(e)?n:e)}}function zn(t,e){var n=e-t;return n?Ua(t,n):Ne(isNaN(t)?e:t)}const ee=function t(e){var n=La(e);function r(i,o){var a=n((i=Ce(i)).r,(o=Ce(o)).r),u=n(i.g,o.g),l=n(i.b,o.b),s=zn(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=u(c),i.b=l(c),i.opacity=s(c),i+""}}return r.gamma=t,r}(1);function Pa(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Wa(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ia(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Fe(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(u){for(a=0;a<r;++a)o[a]=i[a](u);return o}}function Ra(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function K(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ya(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Fe(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Ee=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$e=new RegExp(Ee.source,"g");function Va(t){return function(){return t}}function za(t){return function(e){return t(e)+""}}function qn(t,e){var n=Ee.lastIndex=$e.lastIndex=0,r,i,o,a=-1,u=[],l=[];for(t=t+"",e=e+"";(r=Ee.exec(t))&&(i=$e.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),u[a]?u[a]+=o:u[++a]=o),(r=r[0])===(i=i[0])?u[a]?u[a]+=i:u[++a]=i:(u[++a]=null,l.push({i:a,x:K(r,i)})),n=$e.lastIndex;return n<e.length&&(o=e.slice(n),u[a]?u[a]+=o:u[++a]=o),u.length<2?l[0]?za(l[0].x):Va(e):(e=l.length,function(s){for(var c=0,d;c<e;++c)u[(d=l[c]).i]=d.x(s);return u.join("")})}function Fe(t,e){var n=typeof e,r;return e==null||n==="boolean"?Ne(e):(n==="number"?K:n==="string"?(r=st(e))?(e=r,ee):qn:e instanceof st?ee:e instanceof Date?Ra:Wa(e)?Pa:Array.isArray(e)?Ia:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ya:K)(t,e)}function qa(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Xn=180/Math.PI,De={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Gn(t,e,n,r,i,o){var a,u,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,l/=u),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Xn,skewX:Math.atan(l)*Xn,scaleX:a,scaleY:u}}var ne;function Xa(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?De:Gn(e.a,e.b,e.c,e.d,e.e,e.f)}function Ga(t){return t==null||(ne||(ne=document.createElementNS("http://www.w3.org/2000/svg","g")),ne.setAttribute("transform",t),!(t=ne.transform.baseVal.consolidate()))?De:(t=t.matrix,Gn(t.a,t.b,t.c,t.d,t.e,t.f))}function Kn(t,e,n,r){function i(s){return s.length?s.pop()+" ":""}function o(s,c,d,h,f,p){if(s!==d||c!==h){var _=f.push("translate(",null,e,null,n);p.push({i:_-4,x:K(s,d)},{i:_-2,x:K(c,h)})}else(d||h)&&f.push("translate("+d+e+h+n)}function a(s,c,d,h){s!==c?(s-c>180?c+=360:c-s>180&&(s+=360),h.push({i:d.push(i(d)+"rotate(",null,r)-2,x:K(s,c)})):c&&d.push(i(d)+"rotate("+c+r)}function u(s,c,d,h){s!==c?h.push({i:d.push(i(d)+"skewX(",null,r)-2,x:K(s,c)}):c&&d.push(i(d)+"skewX("+c+r)}function l(s,c,d,h,f,p){if(s!==d||c!==h){var _=f.push(i(f)+"scale(",null,",",null,")");p.push({i:_-4,x:K(s,d)},{i:_-2,x:K(c,h)})}else(d!==1||h!==1)&&f.push(i(f)+"scale("+d+","+h+")")}return function(s,c){var d=[],h=[];return s=t(s),c=t(c),o(s.translateX,s.translateY,c.translateX,c.translateY,d,h),a(s.rotate,c.rotate,d,h),u(s.skewX,c.skewX,d,h),l(s.scaleX,s.scaleY,c.scaleX,c.scaleY,d,h),s=c=null,function(f){for(var p=-1,_=h.length,x;++p<_;)d[(x=h[p]).i]=x.x(f);return d.join("")}}}var Ka=Kn(Xa,"px, ","px)","deg)"),ja=Kn(Ga,", ",")",")"),xt=0,Ft=0,Dt=0,jn=1e3,re,Ot,ie=0,ft=0,oe=0,Ht=typeof performance=="object"&&performance.now?performance:Date,Qn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Oe(){return ft||(Qn(Qa),ft=Ht.now()+oe)}function Qa(){ft=0}function ae(){this._call=this._time=this._next=null}ae.prototype=Zn.prototype={constructor:ae,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Oe():+n)+(e==null?0:+e),!this._next&&Ot!==this&&(Ot?Ot._next=this:re=this,Ot=this),this._call=t,this._time=n,He()},stop:function(){this._call&&(this._call=null,this._time=1/0,He())}};function Zn(t,e,n){var r=new ae;return r.restart(t,e,n),r}function Za(){Oe(),++xt;for(var t=re,e;t;)(e=ft-t._time)>=0&&t._call.call(void 0,e),t=t._next;--xt}function Jn(){ft=(ie=Ht.now())+oe,xt=Ft=0;try{Za()}finally{xt=0,tu(),ft=0}}function Ja(){var t=Ht.now(),e=t-ie;e>jn&&(oe-=e,ie=t)}function tu(){for(var t,e=re,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:re=n);Ot=t,He(r)}function He(t){if(!xt){Ft&&(Ft=clearTimeout(Ft));var e=t-ft;e>24?(t<1/0&&(Ft=setTimeout(Jn,t-Ht.now()-oe)),Dt&&(Dt=clearInterval(Dt))):(Dt||(ie=Ht.now(),Dt=setInterval(Ja,jn)),xt=1,Qn(Jn))}}function tr(t,e,n){var r=new ae;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var eu=wn("start","end","cancel","interrupt"),nu=[],er=0,nr=1,Ue=2,ue=3,rr=4,Be=5,se=6;function le(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;ru(t,n,{name:e,index:r,group:i,on:eu,tween:nu,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:er})}function Le(t,e){var n=j(t,e);if(n.state>er)throw new Error("too late; already scheduled");return n}function J(t,e){var n=j(t,e);if(n.state>ue)throw new Error("too late; already running");return n}function j(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ru(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Zn(o,0,n.time);function o(s){n.state=nr,n.timer.restart(a,n.delay,n.time),n.delay<=s&&a(s-n.delay)}function a(s){var c,d,h,f;if(n.state!==nr)return l();for(c in r)if(f=r[c],f.name===n.name){if(f.state===ue)return tr(a);f.state===rr?(f.state=se,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[c]):+c<e&&(f.state=se,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[c])}if(tr(function(){n.state===ue&&(n.state=rr,n.timer.restart(u,n.delay,n.time),u(s))}),n.state=Ue,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ue){for(n.state=ue,i=new Array(h=n.tween.length),c=0,d=-1;c<h;++c)(f=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=f);i.length=d+1}}function u(s){for(var c=s<n.duration?n.ease.call(null,s/n.duration):(n.timer.restart(l),n.state=Be,1),d=-1,h=i.length;++d<h;)i[d].call(t,c);n.state===Be&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=se,n.timer.stop(),delete r[e];for(var s in r)return;delete t.__transition}}function iu(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>Ue&&r.state<Be,r.state=se,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function ou(t){return this.each(function(){iu(this,t)})}function au(t,e){var n,r;return function(){var i=J(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,u=r.length;a<u;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function uu(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=J(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:e,value:n},l=0,s=i.length;l<s;++l)if(i[l].name===e){i[l]=u;break}l===s&&i.push(u)}o.tween=i}}function su(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=j(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?au:uu)(n,t,e))}function Pe(t,e,n){var r=t._id;return t.each(function(){var i=J(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return j(i,r).value[e]}}function ir(t,e){var n;return(typeof e=="number"?K:e instanceof st?ee:(n=st(e))?(e=n,ee):qn)(t,e)}function lu(t){return function(){this.removeAttribute(t)}}function cu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fu(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function hu(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function du(t,e,n){var r,i,o;return function(){var a,u=n(this),l;return u==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=u+"",a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,u)))}}function gu(t,e,n){var r,i,o;return function(){var a,u=n(this),l;return u==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=u+"",a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,u)))}}function mu(t,e){var n=Kt(t),r=n==="transform"?ja:ir;return this.attrTween(t,typeof e=="function"?(n.local?gu:du)(n,r,Pe(this,"attr."+t,e)):e==null?(n.local?cu:lu)(n):(n.local?hu:fu)(n,r,e))}function pu(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function yu(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function vu(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&yu(t,o)),n}return i._value=e,i}function wu(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&pu(t,o)),n}return i._value=e,i}function xu(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Kt(t);return this.tween(n,(r.local?vu:wu)(r,e))}function _u(t,e){return function(){Le(this,t).delay=+e.apply(this,arguments)}}function bu(t,e){return e=+e,function(){Le(this,t).delay=e}}function Mu(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?_u:bu)(e,t)):j(this.node(),e).delay}function Su(t,e){return function(){J(this,t).duration=+e.apply(this,arguments)}}function Tu(t,e){return e=+e,function(){J(this,t).duration=e}}function ku(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Su:Tu)(e,t)):j(this.node(),e).duration}function Cu(t,e){if(typeof e!="function")throw new Error;return function(){J(this,t).ease=e}}function Au(t){var e=this._id;return arguments.length?this.each(Cu(e,t)):j(this.node(),e).ease}function Nu(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;J(this,t).ease=n}}function Eu(t){if(typeof t!="function")throw new Error;return this.each(Nu(this._id,t))}function $u(t){typeof t!="function"&&(t=Sn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,u=r[i]=[],l,s=0;s<a;++s)(l=o[s])&&t.call(l,l.__data__,s,o)&&u.push(l);return new nt(r,this._parents,this._name,this._id)}function Fu(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var l=e[u],s=n[u],c=l.length,d=a[u]=new Array(c),h,f=0;f<c;++f)(h=l[f]||s[f])&&(d[f]=h);for(;u<r;++u)a[u]=e[u];return new nt(a,this._parents,this._name,this._id)}function Du(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ou(t,e,n){var r,i,o=Du(e)?Le:J;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(e,n),a.on=i}}function Hu(t,e){var n=this._id;return arguments.length<2?j(this.node(),n).on.on(t):this.each(Ou(n,t,e))}function Uu(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Bu(){return this.on("end.remove",Uu(this._id))}function Lu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Se(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var u=r[a],l=u.length,s=o[a]=new Array(l),c,d,h=0;h<l;++h)(c=u[h])&&(d=t.call(c,c.__data__,h,u))&&("__data__"in c&&(d.__data__=c.__data__),s[h]=d,le(s[h],e,n,h,s,j(c,n)));return new nt(o,this._parents,e,n)}function Pu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Mn(t));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var l=r[u],s=l.length,c,d=0;d<s;++d)if(c=l[d]){for(var h=t.call(c,c.__data__,d,l),f,p=j(c,n),_=0,x=h.length;_<x;++_)(f=h[_])&&le(f,e,n,_,h,p);o.push(h),a.push(c)}return new nt(o,a,e,n)}var Wu=At.prototype.constructor;function Iu(){return new Wu(this._groups,this._parents)}function Ru(t,e){var n,r,i;return function(){var o=vt(this,t),a=(this.style.removeProperty(t),vt(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function or(t){return function(){this.style.removeProperty(t)}}function Yu(t,e,n){var r,i=n+"",o;return function(){var a=vt(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function Vu(t,e,n){var r,i,o;return function(){var a=vt(this,t),u=n(this),l=u+"";return u==null&&(l=u=(this.style.removeProperty(t),vt(this,t))),a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,u))}}function zu(t,e){var n,r,i,o="style."+e,a="end."+o,u;return function(){var l=J(this,t),s=l.on,c=l.value[o]==null?u||(u=or(e)):void 0;(s!==n||i!==c)&&(r=(n=s).copy()).on(a,i=c),l.on=r}}function qu(t,e,n){var r=(t+="")=="transform"?Ka:ir;return e==null?this.styleTween(t,Ru(t,r)).on("end.style."+t,or(t)):typeof e=="function"?this.styleTween(t,Vu(t,r,Pe(this,"style."+t,e))).each(zu(this._id,t)):this.styleTween(t,Yu(t,r,e),n).on("end.style."+t,null)}function Xu(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Gu(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Xu(t,a,n)),r}return o._value=e,o}function Ku(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Gu(t,e,n??""))}function ju(t){return function(){this.textContent=t}}function Qu(t){return function(){var e=t(this);this.textContent=e??""}}function Zu(t){return this.tween("text",typeof t=="function"?Qu(Pe(this,"text",t)):ju(t==null?"":t+""))}function Ju(t){return function(e){this.textContent=t.call(this,e)}}function ts(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Ju(i)),e}return r._value=t,r}function es(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,ts(t))}function ns(){for(var t=this._name,e=this._id,n=ar(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],u=a.length,l,s=0;s<u;++s)if(l=a[s]){var c=j(l,e);le(l,t,n,s,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new nt(r,this._parents,t,n)}function rs(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var u={value:a},l={value:function(){--i===0&&o()}};n.each(function(){var s=J(this,r),c=s.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(l)),s.on=e}),i===0&&o()})}var is=0;function nt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function ar(){return++is}var rt=At.prototype;nt.prototype={constructor:nt,select:Lu,selectAll:Pu,selectChild:rt.selectChild,selectChildren:rt.selectChildren,filter:$u,merge:Fu,selection:Iu,transition:ns,call:rt.call,nodes:rt.nodes,node:rt.node,size:rt.size,empty:rt.empty,each:rt.each,on:Hu,attr:mu,attrTween:xu,style:qu,styleTween:Ku,text:Zu,textTween:es,remove:Bu,tween:su,delay:Mu,duration:ku,ease:Au,easeVarying:Eu,end:rs,[Symbol.iterator]:rt[Symbol.iterator]};function os(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var as={time:null,delay:0,duration:250,ease:os};function us(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function ss(t){var e,n;t instanceof nt?(e=t._id,t=t._name):(e=ar(),(n=as).time=Oe(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],u=a.length,l,s=0;s<u;++s)(l=a[s])&&le(l,t,e,s,a,n||us(l,e));return new nt(r,this._parents,t,e)}At.prototype.interrupt=ou,At.prototype.transition=ss;function ls(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ce(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function _t(t){return t=ce(Math.abs(t)),t?t[1]:NaN}function cs(t,e){return function(n,r){for(var i=n.length,o=[],a=0,u=t[0],l=0;i>0&&u>0&&(l+u+1>r&&(u=Math.max(1,r-l)),o.push(n.substring(i-=u,i+u)),!((l+=u+1)>r));)u=t[a=(a+1)%t.length];return o.reverse().join(e)}}function fs(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var hs=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fe(t){if(!(e=hs.exec(t)))throw new Error("invalid format: "+t);var e;return new We({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}fe.prototype=We.prototype;function We(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}We.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ds(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var ur;function gs(t,e){var n=ce(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(ur=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ce(t,Math.max(0,e+o-1))[0]}function sr(t,e){var n=ce(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const lr={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:ls,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>sr(t*100,e),r:sr,s:gs,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function cr(t){return t}var fr=Array.prototype.map,hr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ms(t){var e=t.grouping===void 0||t.thousands===void 0?cr:cs(fr.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?cr:fs(fr.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function s(d){d=fe(d);var h=d.fill,f=d.align,p=d.sign,_=d.symbol,x=d.zero,C=d.width,$=d.comma,k=d.precision,A=d.trim,M=d.type;M==="n"?($=!0,M="g"):lr[M]||(k===void 0&&(k=12),A=!0,M="g"),(x||h==="0"&&f==="=")&&(x=!0,h="0",f="=");var w=_==="$"?n:_==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",F=_==="$"?r:/[%p]/.test(M)?a:"",U=lr[M],B=/[defgprs%]/.test(M);k=k===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function H(y){var N=w,D=F,Q,kt,ut;if(M==="c")D=U(y)+D,y="";else{y=+y;var L=y<0||1/y<0;if(y=isNaN(y)?l:U(Math.abs(y),k),A&&(y=ds(y)),L&&+y==0&&p!=="+"&&(L=!1),N=(L?p==="("?p:u:p==="-"||p==="("?"":p)+N,D=(M==="s"?hr[8+ur/3]:"")+D+(L&&p==="("?")":""),B){for(Q=-1,kt=y.length;++Q<kt;)if(ut=y.charCodeAt(Q),48>ut||ut>57){D=(ut===46?i+y.slice(Q+1):y.slice(Q))+D,y=y.slice(0,Q);break}}}$&&!x&&(y=e(y,1/0));var X=N.length+y.length+D.length,V=X<C?new Array(C-X+1).join(h):"";switch($&&x&&(y=e(V+y,V.length?C-D.length:1/0),V=""),f){case"<":y=N+y+D+V;break;case"=":y=N+V+y+D;break;case"^":y=V.slice(0,X=V.length>>1)+N+y+D+V.slice(X);break;default:y=V+N+y+D;break}return o(y)}return H.toString=function(){return d+""},H}function c(d,h){var f=s((d=fe(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(_t(h)/3)))*3,_=Math.pow(10,-p),x=hr[8+p/3];return function(C){return f(_*C)+x}}return{format:s,formatPrefix:c}}var he,dr,gr;ps({thousands:",",grouping:[3],currency:["$",""]});function ps(t){return he=ms(t),dr=he.format,gr=he.formatPrefix,he}function ys(t){return Math.max(0,-_t(Math.abs(t)))}function vs(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_t(e)/3)))*3-_t(Math.abs(t)))}function ws(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,_t(e)-_t(t))+1}function Ie(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const mr=Symbol("implicit");function Re(){var t=new gn,e=[],n=[],r=mr;function i(o){let a=t.get(o);if(a===void 0){if(r!==mr)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new gn;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Re(e,n).unknown(r)},Ie.apply(i,arguments),i}function pr(){var t=Re().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,u=!1,l=0,s=0,c=.5;delete t.unknown;function d(){var h=e().length,f=i<r,p=f?i:r,_=f?r:i;o=(_-p)/Math.max(1,h-l+s*2),u&&(o=Math.floor(o)),p+=(_-p-o*(h-l))*c,a=o*(1-l),u&&(p=Math.round(p),a=Math.round(a));var x=Fi(h).map(function(C){return p+o*C});return n(f?x.reverse():x)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,u=!0,d()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(h){return arguments.length?(u=!!h,d()):u},t.padding=function(h){return arguments.length?(l=Math.min(1,s=+h),d()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},t.paddingOuter=function(h){return arguments.length?(s=+h,d()):s},t.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),d()):c},t.copy=function(){return pr(e(),[r,i]).round(u).paddingInner(l).paddingOuter(s).align(c)},Ie.apply(d(),arguments)}function xs(t){return function(){return t}}function _s(t){return+t}var yr=[0,1];function bt(t){return t}function Ye(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:xs(isNaN(e)?NaN:.5)}function bs(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Ms(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Ye(i,r),o=n(a,o)):(r=Ye(r,i),o=n(o,a)),function(u){return o(r(u))}}function Ss(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Ye(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(u){var l=Mi(t,u,1,r)-1;return o[l](i[l](u))}}function Ts(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ks(){var t=yr,e=yr,n=Fe,r,i,o,a=bt,u,l,s;function c(){var h=Math.min(t.length,e.length);return a!==bt&&(a=bs(t[0],t[h-1])),u=h>2?Ss:Ms,l=s=null,d}function d(h){return h==null||isNaN(h=+h)?o:(l||(l=u(t.map(r),e,n)))(r(a(h)))}return d.invert=function(h){return a(i((s||(s=u(e,t.map(r),K)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,_s),c()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),n=qa,c()},d.clamp=function(h){return arguments.length?(a=h?!0:bt,c()):a!==bt},d.interpolate=function(h){return arguments.length?(n=h,c()):n},d.unknown=function(h){return arguments.length?(o=h,d):o},function(h,f){return r=h,i=f,c()}}function Cs(){return ks()(bt,bt)}function As(t,e,n,r){var i=$i(t,e,n),o;switch(r=fe(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=vs(i,a))&&(r.precision=o),gr(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=ws(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=ys(i))&&(r.precision=o-(r.type==="%")*2);break}}return dr(r)}function Ns(t){var e=t.domain;return t.ticks=function(n){var r=e();return Ei(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return As(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],u=r[o],l,s,c=10;for(u<a&&(s=a,a=u,u=s,s=i,i=o,o=s);c-- >0;){if(s=_e(a,u,n),s===l)return r[i]=a,r[o]=u,e(r);if(s>0)a=Math.floor(a/s)*s,u=Math.ceil(u/s)*s;else if(s<0)a=Math.ceil(a*s)/s,u=Math.floor(u*s)/s;else break;l=s}return t},t}function vr(){var t=Cs();return t.copy=function(){return Ts(t,vr())},Ie.apply(t,arguments),Ns(t)}const Ve=new Date,ze=new Date;function tt(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),u=i.ceil(o);return o-a<u-o?a:u},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,u)=>{const l=[];if(o=i.ceil(o),u=u==null?1:Math.floor(u),!(o<a)||!(u>0))return l;let s;do l.push(s=new Date(+o)),e(o,u),t(o);while(s<o&&o<a);return l},i.filter=o=>tt(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,u)=>{if(a>=a)if(u<0)for(;++u<=0;)for(;e(a,-1),!o(a););else for(;--u>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(Ve.setTime(+o),ze.setTime(+a),t(Ve),t(ze),Math.floor(n(Ve,ze))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const qe=1e3*60,Ut=qe*60*24,wr=Ut*7,Xe=tt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*qe)/Ut,t=>t.getDate()-1);Xe.range;const Ge=tt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ut,t=>t.getUTCDate()-1);Ge.range,tt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ut,t=>Math.floor(t/Ut)).range;function ht(t){return tt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*qe)/wr)}const xr=ht(0),de=ht(1),Es=ht(2),$s=ht(3),Mt=ht(4),Fs=ht(5),Ds=ht(6);xr.range,de.range,Es.range,$s.range,Mt.range,Fs.range,Ds.range;function dt(t){return tt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/wr)}const _r=dt(0),ge=dt(1),Os=dt(2),Hs=dt(3),St=dt(4),Us=dt(5),Bs=dt(6);_r.range,ge.range,Os.range,Hs.range,St.range,Us.range,Bs.range;const gt=tt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());gt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:tt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)}),gt.range;const mt=tt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());mt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:tt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)}),mt.range;function Ke(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function je(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Bt(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Ls(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,u=t.months,l=t.shortMonths,s=Lt(i),c=Pt(i),d=Lt(o),h=Pt(o),f=Lt(a),p=Pt(a),_=Lt(u),x=Pt(u),C=Lt(l),$=Pt(l),k={a:L,A:X,b:V,B:Qe,c:null,d:Cr,e:Cr,f:ul,g:yl,G:wl,H:il,I:ol,j:al,L:Ar,m:sl,M:ll,p:It,q:Vl,Q:Or,s:Hr,S:cl,u:fl,U:hl,V:dl,w:gl,W:ml,x:null,X:null,y:pl,Y:vl,Z:xl,"%":Dr},A={a:zl,A:ql,b:Xl,B:Gl,c:null,d:Er,e:Er,f:Sl,g:Ol,G:Ul,H:_l,I:bl,j:Ml,L:$r,m:Tl,M:kl,p:Kl,q:jl,Q:Or,s:Hr,S:Cl,u:Al,U:Nl,V:El,w:$l,W:Fl,x:null,X:null,y:Dl,Y:Hl,Z:Bl,"%":Dr},M={a:H,A:y,b:N,B:D,c:Q,d:Tr,e:Tr,f:tl,g:Sr,G:Mr,H:kr,I:kr,j:js,L:Js,m:Ks,M:Qs,p:B,q:Gs,Q:nl,s:rl,S:Zs,u:Ys,U:Vs,V:zs,w:Rs,W:qs,x:kt,X:ut,y:Sr,Y:Mr,Z:Xs,"%":el};k.x=w(n,k),k.X=w(r,k),k.c=w(e,k),A.x=w(n,A),A.X=w(r,A),A.c=w(e,A);function w(m,b){return function(T){var g=[],I=-1,E=0,z=m.length,q,pt,Lr;for(T instanceof Date||(T=new Date(+T));++I<z;)m.charCodeAt(I)===37&&(g.push(m.slice(E,I)),(pt=br[q=m.charAt(++I)])!=null?q=m.charAt(++I):pt=q==="e"?" ":"0",(Lr=b[q])&&(q=Lr(T,pt)),g.push(q),E=I+1);return g.push(m.slice(E,I)),g.join("")}}function F(m,b){return function(T){var g=Bt(1900,void 0,1),I=U(g,m,T+="",0),E,z;if(I!=T.length)return null;if("Q"in g)return new Date(g.Q);if("s"in g)return new Date(g.s*1e3+("L"in g?g.L:0));if(b&&!("Z"in g)&&(g.Z=0),"p"in g&&(g.H=g.H%12+g.p*12),g.m===void 0&&(g.m="q"in g?g.q:0),"V"in g){if(g.V<1||g.V>53)return null;"w"in g||(g.w=1),"Z"in g?(E=je(Bt(g.y,0,1)),z=E.getUTCDay(),E=z>4||z===0?ge.ceil(E):ge(E),E=Ge.offset(E,(g.V-1)*7),g.y=E.getUTCFullYear(),g.m=E.getUTCMonth(),g.d=E.getUTCDate()+(g.w+6)%7):(E=Ke(Bt(g.y,0,1)),z=E.getDay(),E=z>4||z===0?de.ceil(E):de(E),E=Xe.offset(E,(g.V-1)*7),g.y=E.getFullYear(),g.m=E.getMonth(),g.d=E.getDate()+(g.w+6)%7)}else("W"in g||"U"in g)&&("w"in g||(g.w="u"in g?g.u%7:"W"in g?1:0),z="Z"in g?je(Bt(g.y,0,1)).getUTCDay():Ke(Bt(g.y,0,1)).getDay(),g.m=0,g.d="W"in g?(g.w+6)%7+g.W*7-(z+5)%7:g.w+g.U*7-(z+6)%7);return"Z"in g?(g.H+=g.Z/100|0,g.M+=g.Z%100,je(g)):Ke(g)}}function U(m,b,T,g){for(var I=0,E=b.length,z=T.length,q,pt;I<E;){if(g>=z)return-1;if(q=b.charCodeAt(I++),q===37){if(q=b.charAt(I++),pt=M[q in br?b.charAt(I++):q],!pt||(g=pt(m,T,g))<0)return-1}else if(q!=T.charCodeAt(g++))return-1}return g}function B(m,b,T){var g=s.exec(b.slice(T));return g?(m.p=c.get(g[0].toLowerCase()),T+g[0].length):-1}function H(m,b,T){var g=f.exec(b.slice(T));return g?(m.w=p.get(g[0].toLowerCase()),T+g[0].length):-1}function y(m,b,T){var g=d.exec(b.slice(T));return g?(m.w=h.get(g[0].toLowerCase()),T+g[0].length):-1}function N(m,b,T){var g=C.exec(b.slice(T));return g?(m.m=$.get(g[0].toLowerCase()),T+g[0].length):-1}function D(m,b,T){var g=_.exec(b.slice(T));return g?(m.m=x.get(g[0].toLowerCase()),T+g[0].length):-1}function Q(m,b,T){return U(m,e,b,T)}function kt(m,b,T){return U(m,n,b,T)}function ut(m,b,T){return U(m,r,b,T)}function L(m){return a[m.getDay()]}function X(m){return o[m.getDay()]}function V(m){return l[m.getMonth()]}function Qe(m){return u[m.getMonth()]}function It(m){return i[+(m.getHours()>=12)]}function Vl(m){return 1+~~(m.getMonth()/3)}function zl(m){return a[m.getUTCDay()]}function ql(m){return o[m.getUTCDay()]}function Xl(m){return l[m.getUTCMonth()]}function Gl(m){return u[m.getUTCMonth()]}function Kl(m){return i[+(m.getUTCHours()>=12)]}function jl(m){return 1+~~(m.getUTCMonth()/3)}return{format:function(m){var b=w(m+="",k);return b.toString=function(){return m},b},parse:function(m){var b=F(m+="",!1);return b.toString=function(){return m},b},utcFormat:function(m){var b=w(m+="",A);return b.toString=function(){return m},b},utcParse:function(m){var b=F(m+="",!0);return b.toString=function(){return m},b}}}var br={"-":"",_:" ",0:"0"},O=/^\s*\d+/,Ps=/^%/,Ws=/[\\^$*+?|[\]().{}]/g;function S(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Is(t){return t.replace(Ws,"\\$&")}function Lt(t){return new RegExp("^(?:"+t.map(Is).join("|")+")","i")}function Pt(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Rs(t,e,n){var r=O.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Ys(t,e,n){var r=O.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Vs(t,e,n){var r=O.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function zs(t,e,n){var r=O.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function qs(t,e,n){var r=O.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Mr(t,e,n){var r=O.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Sr(t,e,n){var r=O.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Xs(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Gs(t,e,n){var r=O.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Ks(t,e,n){var r=O.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Tr(t,e,n){var r=O.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function js(t,e,n){var r=O.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function kr(t,e,n){var r=O.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Qs(t,e,n){var r=O.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Zs(t,e,n){var r=O.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Js(t,e,n){var r=O.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function tl(t,e,n){var r=O.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function el(t,e,n){var r=Ps.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function nl(t,e,n){var r=O.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function rl(t,e,n){var r=O.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Cr(t,e){return S(t.getDate(),e,2)}function il(t,e){return S(t.getHours(),e,2)}function ol(t,e){return S(t.getHours()%12||12,e,2)}function al(t,e){return S(1+Xe.count(gt(t),t),e,3)}function Ar(t,e){return S(t.getMilliseconds(),e,3)}function ul(t,e){return Ar(t,e)+"000"}function sl(t,e){return S(t.getMonth()+1,e,2)}function ll(t,e){return S(t.getMinutes(),e,2)}function cl(t,e){return S(t.getSeconds(),e,2)}function fl(t){var e=t.getDay();return e===0?7:e}function hl(t,e){return S(xr.count(gt(t)-1,t),e,2)}function Nr(t){var e=t.getDay();return e>=4||e===0?Mt(t):Mt.ceil(t)}function dl(t,e){return t=Nr(t),S(Mt.count(gt(t),t)+(gt(t).getDay()===4),e,2)}function gl(t){return t.getDay()}function ml(t,e){return S(de.count(gt(t)-1,t),e,2)}function pl(t,e){return S(t.getFullYear()%100,e,2)}function yl(t,e){return t=Nr(t),S(t.getFullYear()%100,e,2)}function vl(t,e){return S(t.getFullYear()%1e4,e,4)}function wl(t,e){var n=t.getDay();return t=n>=4||n===0?Mt(t):Mt.ceil(t),S(t.getFullYear()%1e4,e,4)}function xl(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+S(e/60|0,"0",2)+S(e%60,"0",2)}function Er(t,e){return S(t.getUTCDate(),e,2)}function _l(t,e){return S(t.getUTCHours(),e,2)}function bl(t,e){return S(t.getUTCHours()%12||12,e,2)}function Ml(t,e){return S(1+Ge.count(mt(t),t),e,3)}function $r(t,e){return S(t.getUTCMilliseconds(),e,3)}function Sl(t,e){return $r(t,e)+"000"}function Tl(t,e){return S(t.getUTCMonth()+1,e,2)}function kl(t,e){return S(t.getUTCMinutes(),e,2)}function Cl(t,e){return S(t.getUTCSeconds(),e,2)}function Al(t){var e=t.getUTCDay();return e===0?7:e}function Nl(t,e){return S(_r.count(mt(t)-1,t),e,2)}function Fr(t){var e=t.getUTCDay();return e>=4||e===0?St(t):St.ceil(t)}function El(t,e){return t=Fr(t),S(St.count(mt(t),t)+(mt(t).getUTCDay()===4),e,2)}function $l(t){return t.getUTCDay()}function Fl(t,e){return S(ge.count(mt(t)-1,t),e,2)}function Dl(t,e){return S(t.getUTCFullYear()%100,e,2)}function Ol(t,e){return t=Fr(t),S(t.getUTCFullYear()%100,e,2)}function Hl(t,e){return S(t.getUTCFullYear()%1e4,e,4)}function Ul(t,e){var n=t.getUTCDay();return t=n>=4||n===0?St(t):St.ceil(t),S(t.getUTCFullYear()%1e4,e,4)}function Bl(){return"+0000"}function Dr(){return"%"}function Or(t){return+t}function Hr(t){return Math.floor(+t/1e3)}var Tt,Ur;Ll({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ll(t){return Tt=Ls(t),Ur=Tt.format,Tt.parse,Tt.utcFormat,Tt.utcParse,Tt}function Wt(t,e,n){this.k=t,this.x=e,this.y=n}Wt.prototype={constructor:Wt,scale:function(t){return t===1?this:new Wt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Wt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},Wt.prototype;function me(t,e,n){const r=e.getCoord(n);r!==void 0&&t.push(r)}function Br(t){function e(n){const r=this;if(r.parentNode===null)return;et(r.parentElement).append("a").attr("xlink:href",t(n)).node()?.appendChild(r)}return e}class Pl{constructor(e,n,r,i){this.hoveredBuild=null,this.hoveredBuildTooltip=null,this.hoveredBuildTooltipOnRight=!1,this.extraTicks=[],this.hasViewConfig=!1,this.windowWidth=0,this.scalingFactor=1,this.builders=[],this.buildGroups=[],this.builderToBuilds=new Map,this.setHoveredBuildId=e,this.minColumnWidth=n,this.showBuildNumberBackground=r,this.layoutSettings=i,this.minColumnWidth<=0&&(console.error(`Bad column width configuration
	 min: ${this.minColumnWidth}`),this.minColumnWidth=10)}onViewConfigMaybeUpdate(e,n,r,i,o,a,u,l){e===null||n===null||r===null||i===null||o===null||a===null||this.rootEl===e&&this.headerEl===n&&this.headerContentEl===r&&this.contentEl===i&&this.innerContentEl===o&&this.svgContainerEl===a&&this.windowWidth===u&&this.scalingFactor===l||(this.hasViewConfig=!0,this.rootEl=e,this.headerEl=n,this.headerContentEl=r,this.contentEl=i,this.innerContentEl=o,this.svgContainerEl=a,this.windowWidth=u,this.scalingFactor=l,this.waterfall=et(this.rootEl),this.container=et(this.svgContainerEl),this.header=et(this.headerContentEl),this.createElements(),this.render())}onData(e,n,r){this.builders=e,this.buildGroups=n,this.builderToBuilds=r,this.render()}render(){this.hasViewConfig&&(this.setContentWidth(),this.setContentHeight(),this.drawBuilds(),this.drawXAxis(),this.drawYAxis())}getClassForBuilderResults(e){const n=this.builderToBuilds.get(e.builderid);return R.results2class(n===void 0?null:n[0],null)}getHeaderHeight(){let e=0;for(const n of this.builders)e=Math.max(n.name.length,e);return Math.max(100,e*3)}createElements(){const e=this.layoutSettings;this.container.selectAll("*").remove(),this.header.selectAll("*").remove(),this.chart=this.container.append("svg").append("g").attr("transform",`translate(${e.margin.left}, ${e.margin.top})`).attr("class","chart");const n=this.getHeaderHeight();this.waterfall.select(".header").style("height",n),this.headerSvg=this.header.append("svg").append("g").attr("transform",`translate(${e.margin.left}, ${n})`).attr("class","header")}setContentWidth(){const e=this.layoutSettings.margin.right+this.layoutSettings.margin.left,n=this.rootEl.offsetWidth-e,r=this.builders.length*this.minColumnWidth,i=n>=r,o=i?"100%":`${r+e}px`;this.waterfall.select(".inner-content").style("width",o),this.waterfall.select(".header-content").style("width",o),this.contentWidth=i?n:r,this.containerWidth=this.contentWidth+e}setContentHeight(){const e=this.layoutSettings;let n=-e.gap;for(const o of this.buildGroups)n+=o.maxTime-o.minTime+e.gap;const r=e.margin.top+e.margin.bottom;this.contentHeight=n*this.scalingFactor,this.containerHeight=this.contentHeight+r,this.container.style("height",`${this.containerHeight}px`);const i=this.getHeaderHeight();this.waterfall.select("div.header").style("height",i+"px"),this.headerSvg.attr("transform",`translate(${e.margin.left}, ${i})`)}getScaleX(){return pr().domain(this.builders.map(e=>e.builderid.toString())).rangeRound([0,this.contentWidth]).padding(.05)}getBuilderNameTickFormat(){return Re().domain(this.builders.map(e=>e.builderid.toString())).range(this.builders.map(e=>e.name))}getScaleY(){return new wi(this.buildGroups,this.layoutSettings.gap,this.contentHeight)}getTickValues(e){const n=[...this.extraTicks];for(const r of this.buildGroups)me(n,e,r.minTime),me(n,e,r.maxTime);return n}setExtraTicksForBuild(e){const n=this.getScaleY(),r=[];e.complete_at!==null&&me(r,n,e.complete_at),me(r,n,e.started_at),this.extraTicks=r}drawXAxis(){const e=this.getScaleX();this.headerSvg.select(".axis.x").remove();const n=this.headerSvg.append("g").attr("class","axis x");n.selectAll("*").remove();const r=Pi(e).tickFormat(this.getBuilderNameTickFormat()),i=n.call(r);i.selectAll("text").style("text-anchor","start").attr("transform","translate(0, -16) rotate(-25)").attr("dy","0.75em").each(Br(o=>`#/builders/${o}`)),i.selectAll("line").data(this.builders).attr("transform","rotate(90)").attr("x1",0).attr("x2",0).attr("y1",e.bandwidth()/2).attr("y2",-e.bandwidth()/2).attr("class",o=>this.getClassForBuilderResults(o)).classed("stroke",!0)}drawYAxis(){const e=vr(),n=this.getScaleY();this.chart.select(".axis.y").remove();const r=this.chart.append("g").attr("class","axis y");r.append("rect").attr("x",-this.layoutSettings.margin.left).attr("y",-this.layoutSettings.margin.top).attr("width",this.layoutSettings.margin.left).attr("height",this.containerHeight).style("fill","#fff");const i=this.getTickValues(n),o="%x^%H:%M",a=d=>{const h=n.invert(d);if(h===void 0)return"";const f=new Date(h*1e3);return Ur(o)(f)},u=Wi(e).tickValues(i).tickFormat(a),l=r.call(u);function s(){const d=et(this),h=d.text().split("^");d.text("");for(let f=0;f<h.length;f++){const p=h[f],_=d.append("tspan").text(p);if(f!==0){const x=d.attr("x");_.attr("x",x).attr("dy",f*10)}}}l.selectAll("text").each(s);const c=d=>this.extraTicks.includes(d)?"2, 5":"2, 1";l.selectAll(".tick").append("line").attr("x2",this.contentWidth).attr("stroke-dasharray",c),r.attr("transform",`translate(${this.rootEl.scrollLeft}, 0)`),this.waterfall.on("scroll",()=>{l.attr("transform",`translate(${this.rootEl.scrollLeft}, 0)`)})}getPoinstForTooltip(e,n){return n?`20,0 0,${e/2} 20,${e} 170,${e} 170,0`:`150,0 170,${e/2} 150,${e} 0,${e} 0,0`}onHoveredBuildSteps(e){if(this.hoveredBuildTooltip===null)return;const n=e.length*15+7;this.hoveredBuildTooltip.transition().duration(100).attr("transform",`translate(${this.hoveredBuildTooltipOnRight?5:-175}, ${-n/2})`).select("polygon").attr("points",this.getPoinstForTooltip(n,this.hoveredBuildTooltipOnRight));const r=function(i){const o=((i.complete_at??0)-(i.started_at??0))*1e3;return o>0?`(${o/1e3}s)`:""};this.hoveredBuildTooltip.selectAll(".buildstep").data(e).enter().append("g").attr("class","buildstep").append("text").attr("y",(i,o)=>15*(o+1)).attr("x",this.hoveredBuildTooltipOnRight?30:10).attr("class",i=>R.results2class(i,null)).classed("fill",!0).transition().delay(100).text((i,o)=>`${o+1}. ${i.name} ${r(i)}`)}mouseOver(e,n,r){if(e.parentElement===null)return;const i=et(e),o=On(r,e);this.setExtraTicksForBuild(n),this.drawYAxis();const a=et(e.parentElement);e.parentElement.appendChild(e),a.each(function(){return this.parentElement?.appendChild(this)});const u=n.builderid<this.builders.length/2;let l=40;const s=i.append("g").attr("class","svg-tooltip").attr("transform",`translate(${o[0]}, ${o[1]})`).append("g").attr("class","tooltip-content").attr("transform",`translate(${u?5:-175}, ${-l/2})`);s.append("polygon").attr("points",this.getPoinstForTooltip(l,u)),this.hoveredBuild=n,this.hoveredBuildTooltip=s,this.hoveredBuildTooltipOnRight=u,this.setHoveredBuildId(n.buildid)}mouseMove(e,n){const r=et(e),i=On(n,e);r.select(".svg-tooltip").attr("transform",`translate(${i[0]}, ${i[1]})`)}mouseOut(e){const n=et(e);this.extraTicks=[],this.drawYAxis(),this.hoveredBuild=null,this.hoveredBuildTooltip=null,this.setHoveredBuildId(null),n.selectAll(".svg-tooltip").remove()}drawBuilds(){const e=this.getScaleX(),n=this.getScaleY();this.chart.selectAll(".builder").remove();const r=this.chart.selectAll(".builder").data(this.builders).enter().append("g").attr("class","builder").attr("transform",c=>`translate(${e(c.builderid.toString())}, 0)`),i=c=>this.builderToBuilds.get(c.builderid)??[],o=c=>c.buildid.toString(),a=r.selectAll(".build").data(i,o).enter().append("g").attr("class","build").attr("transform",c=>`translate(0, ${n.getCoord(c.complete_at??0)})`),u=c=>Math.max(10,Math.abs((n.getCoord(c.started_at)??0)-(n.getCoord(c.complete_at??0)??0))),l=Br(c=>`#/builders/${c.builderid}/builds/${c.number}`);a.append("rect").attr("class",c=>R.results2class(c,null)).attr("width",e.bandwidth()).attr("height",u).classed("fill",!0).each(l),this.showBuildNumberBackground&&a.append("rect").attr("y",-15).attr("width",e.bandwidth()).attr("height",15).style("fill","#ccc"),a.append("text").attr("class","id").attr("x",e.bandwidth()/2).attr("y",-3).text(c=>c.number).each(l);const s=this;a.on("mouseover",function(c,d){s.mouseOver(this,d,c)}).on("mousemove",function(c){s.mouseMove(this,c)}).on("mouseout",function(){s.mouseOut(this)})}}const Wl=(t,e,n,r,i,o)=>!o&&!it.hasActiveMaster(t,n)||!i&&!r.has(t.builderid)?!1:e.shouldShowByTags(t.tags),Il=(t,e,n)=>!(!n&&!it.hasActiveMaster(t,e)),Rl=t=>{const e=new Set;for(const r of t)for(const i of r.tags)e.add(i);const n=[...e.keys()];return n.sort((r,i)=>r.localeCompare(i)),n},Yl=Pr.observer(()=>{const t=R.useDataAccessor([]),e=it.useWindowSize(),n=it.useTagFilterManager("tags",it.TagFilterManagerTagMode.ToggleOnOff),r=v.useRef(null),i=v.useRef(null),o=v.useRef(null),a=v.useRef(null),u=v.useRef(null),l=v.useRef(null),s=Ze.buildbotGetSettings(),[c,d]=v.useState(()=>s.getFloatSetting("Waterfall.scaling_waterfall")),h=s.getIntegerSetting("Waterfall.lazy_limit_waterfall"),f=s.getBooleanSetting("Waterfall.show_builders_without_builds"),[p,_]=v.useState(()=>s.getBooleanSetting("Waterfall.show_old_builders")),[x,C]=v.useState(h),[$,k]=v.useState(null),A=R.useDataApiQuery(()=>R.Builder.getAll(t,{query:{order:"name"}})),M=R.useDataApiQuery(()=>R.Master.getAll(t)),w=R.useDataApiDynamicQueryResolved([x],()=>R.Build.getAll(t,{query:{limit:x,order:"-started_at"}})),F=R.useDataApiDynamicQuery([$],()=>$===null?new R.DataCollection:t.get(`builds/${$}/steps`,{},R.stepDescriptor)),U=A.resolved&&M.resolved&&w.resolved,B={margin:{top:15,right:20,bottom:20,left:70},gap:30},[H,y]=v.useState(()=>new Pl(k,s.getIntegerSetting("Waterfall.min_column_width_waterfall"),s.getBooleanSetting("Waterfall.number_background_waterfall"),B)),N=L=>{const X=c*L;d(X),s.setSetting("Waterfall.scaling_waterfall",X),s.save()},D=()=>N(1.5),Q=()=>N(1/1.5);it.useTopbarActions([{caption:"",icon:P.jsx(pi,{}),action:D},{caption:"",icon:P.jsx(mi,{}),action:Q}]),sn("+",()=>D()),sn("-",()=>Q()),v.useEffect(()=>yt.autorun(()=>{const L=yi(w.array),X=A.array.filter(It=>Wl(It,n,M,L,f,p)),V=new Set(X.map(It=>It.builderid)),Qe=vi(V,w.array,s.getIntegerSetting("Waterfall.idle_threshold_waterfall"),Date.now()/1e3);H.onData(X,Qe,L)}),[p,w.array.length,n.tags]),v.useEffect(()=>{H.onViewConfigMaybeUpdate(r.current,i.current,o.current,a.current,u.current,l.current,e.width,c)}),v.useEffect(()=>yt.autorun(()=>{H.onHoveredBuildSteps(F.array)}),[F]);const kt=()=>{w.array.length<x||H.containerHeight-u.current.scrollTop<1e3&&C(L=>L+h)};if(!U)return P.jsx("div",{ref:r,className:"container bb-waterfall-view",children:P.jsx(it.LoadingIndicator,{})});const ut=A.array.filter(L=>Il(L,M,p));return P.jsxs("div",{ref:r,className:"container bb-waterfall-view",children:[P.jsx("div",{children:P.jsxs("p",{children:["Tags: ",n.getElementsForTags(Rl(ut))]})}),P.jsx("div",{ref:i,className:"header",children:P.jsx("div",{ref:o,className:"header-content"})}),P.jsx("div",{ref:a,className:"content",children:P.jsx("div",{ref:u,onScroll:kt,className:"inner-content",children:P.jsx("div",{ref:l,className:"svg-container"})})})]})});Ze.buildbotSetupPlugin(t=>{t.registerMenuGroup({name:"waterfall",caption:"Waterfall View",icon:P.jsx(gi,{}),order:5,route:"/waterfall",parentName:null}),t.registerRoute({route:"/waterfall",group:"waterfall",element:()=>P.jsx(Yl,{})}),t.registerSettingGroup({name:"Waterfall",caption:"Waterfall related settings",items:[{type:"float",name:"scaling_waterfall",caption:"Scaling factor",defaultValue:1},{type:"integer",name:"min_column_width_waterfall",caption:"Minimum column width (px)",defaultValue:40},{type:"integer",name:"lazy_limit_waterfall",caption:"Lazy loading limit",defaultValue:40},{type:"integer",name:"idle_threshold_waterfall",caption:"Idle time threshold in unix time stamp (eg. 300 = 5 min)",defaultValue:300},{type:"boolean",name:"number_background_waterfall",caption:"Build number background",defaultValue:!1},{type:"boolean",name:"show_builders_without_builds",caption:"Show builders without builds",defaultValue:!1},{type:"boolean",name:"show_old_builders",caption:"Show old builders",defaultValue:!1}]})})});
